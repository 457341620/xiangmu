"use strict";$(function(){$.getJSON("http://datainfo.duapp.com/shopdata/getCar.php?callback=?",{userID:$.cookie("username")},function(c){var e=$.cookie("shop");console.log(e,c,$.cookie("username"));var n="";$.each(c,function(c,e){n+=' <div class="shopping">\n                        <ul class="shop_ul">\n                            <li>\n                                 <a href="javascript:;">\n                                <input  type="checkbox" class="only" >\n                                 </a>\n                            </li>\n                            <li>\n                                <a href="javascript:;" class="pic">'+e.goodsName+'</a>\n                                <img src="'+e.goodsListImg+'" alt="">\n                            </li>\n                            <li><a href="javascript:;">￥<span class="pice">'+e.price+'</span>.00</a></li>\n                            <li><a href="javascript:;">'+e.price+'金币</a></li>\n                            <li>\n                                <a href="javascript:;"  class="mul">-</a>\n                                <a href="javascript:;" class="num">'+e.number+'</a>\n                                <a href="javascript:;" class="add">+</a>\n                            </li>\n                            <li><a href="javascript:;"></a></li>\n                            <li><a href="javascript:;" class="xiaoji">'+e.price+'</a></li>\n                            <li>\n                                <a href="javascript:;" class="dete">删除</a>\n                                <a href="javascript:;">移入我的收藏</a>\n                            </li>\n                        </ul>\n                    </div>',$(".cart_shop").append(n)}),$(".add").each(function(c){$(".add").eq(c).off("click").click(function(){$(".num").eq(c).html(parseInt($(".num").eq(c).html())+1)})}),$(".mul").each(function(c){$(".mul").eq(c).off("click").click(function(){$(".num").eq(c).html(parseInt($(".num").eq(c).html())-1),$(".num").eq(c).html()<0&&$(".num").eq(c).html(0)})});var i=$(".all"),l=$(".only");$("input");$(".all1").on("click",function(){$(".all2").prop("checked",!0)}),$(".all2").on("click",function(){$(".all1").prop("checked",!0)}),$(".dete").click(function(){$(this).parents(".shopping").remove()});for(var a=function(c){$(".add").eq(c).click(function(){l.eq(c).prop("checked",!0),function(){for(var c=0,e=$(".pice"),n=0;n<l.length;n++)l[n].checked&&(c+=parseFloat($(".num")[n].innerHTML)*parseFloat(e[n].innerHTML),$(".xiaoji").eq(n).text(c))}()}),i.click(function(){var a=[],e=0;$(".only:checked").length;l.prop("checked",$(this).prop("checked")),l.click(function(){"only:checked".length==l.length?(i.prop("checked",!0),$(".shop_ul li").each(function(c){if(l.eq(c).prop("checked")){console.log($(".num").text());var e=$(".only:checked").eq(c).find(".num").text(),n=$(".only:checked").eq(c).siblings(".pice").text();a.push(parseFloat(e)*parseFloat(n))}}),$.each(a,function(c){e+=a[c]}),$(".zong").text(e)):(i.prop("checked",!1),$(".zong").text(0))})})},t=0;t<$(".add").length;t++)a(t)})});